# AssetStream Data Tables Guide

This document provides a comprehensive overview of each table (collection) in the AssetStream database, detailing the information that is required from a user for each entry.

---

### 1. Table: `users`

**Purpose:** Stores essential information about each registered user.

| Field         | User Provided? | Description                                     | Example                       |
| :------------ | :------------- | :---------------------------------------------- | :---------------------------- |
| `uid`         | No             | Auto-generated by Firebase Authentication.      | `aBCdEfgHiJkLmNoPqRsTuVwXyZ1` |
| `email`       | **Yes**        | The user's email, provided at registration.     | `user@example.com`            |
| `displayName` | **Yes**        | The user's full name, provided at registration. | `Jane Doe`                    |
| `photoURL`    | **Yes** (Opt)  | URL for the user's profile picture.             | `https://.../photo.jpg`       |
| `createdAt`   | No             | Auto-generated when the account is created.     | `2024-01-01T10:00:00Z`        |
| `role`        | **Yes**        | The role selected at registration.              | `homeowner`                   |

---

### 2. Table: `properties`

**Purpose:** Contains the core details for each property a user manages.

| Field             | User Provided? | Description                                       | Example                              |
| :---------------- | :------------- | :------------------------------------------------ | :----------------------------------- |
| `ownerId`         | No             | Automatically linked to the `users.uid`.          | `aBCdEfgHiJkLmNoPqRsTuVwXyZ1`         |
| `address`         | **Yes**        | The full street address of the property.          | `123 Oak Avenue, Manchester, M1 2AB` |
| `propertyType`    | **Yes**        | The type of property (e.g., `detached`, `flat`).  | `detached`                           |
| `bedrooms`        | **Yes**        | The number of bedrooms.                           | `3`                                  |
| `bathrooms`       | **Yes**        | The number of bathrooms.                          | `2`                                  |
| `sizeSqFt`        | **Yes**        | The property size in square feet.                 | `1200`                               |
| `purchasePrice`   | **Yes**        | The original purchase price.                      | `350000`                             |
| `purchaseDate`    | **Yes**        | The date the property was purchased.              | `2020-06-15T00:00:00Z`               |
| `epcRating`       | **Yes** (Opt)  | The Energy Performance Certificate rating.        | `B`                                  |
| `councilTaxBand`  | **Yes** (Opt)  | The council tax band.                             | `D`                                  |
| `mortgageDetails` | **Yes**        | A set of fields for current mortgage information. | (See sub-table)                      |
| `insurancePremiums`| **Yes**       | A set of fields for annual insurance costs.       | (See sub-table)                      |

#### `mortgageDetails` (Sub-Fields)

| Field                   | User Provided? | Description                         | Example                |
| :---------------------- | :------------- | :---------------------------------- | :--------------------- |
| `initialMortgage`       | **Yes**        | The initial mortgage loan amount.   | `300000`               |
| `currentBalance`        | **Yes**        | The outstanding mortgage balance.   | `270000`               |
| `interestRate`          | **Yes**        | The current interest rate (%).      | `3.5`                  |
| `termYears`             | **Yes**        | The total length of the mortgage.   | `25`                   |
| `renewalDate`           | **Yes**        | The date the current fixed term ends. | `2025-06-01T00:00:00Z` |
| `regularMonthlyPayment` | **Yes**        | The standard monthly payment.       | `1340`                 |
| `paymentDayOfMonth`     | **Yes**        | The day of the month for payments.  | `1`                    |

#### `insurancePremiums` (Sub-Fields)

| Field       | User Provided? | Description                          | Example |
| :---------- | :------------- | :----------------------------------- | :------ |
| `buildings` | **Yes**        | The annual premium for buildings insurance. | `300`   |
| `contents`  | **Yes**        | The annual premium for contents insurance.  | `150`   |

---

### 3. Table: `assets` (sub-collection of `properties`)

**Purpose:** Tracks all tangible assets within a specific property.

| Field            | User Provided? | Description                                       | Example                       |
| :--------------- | :------------- | :------------------------------------------------ | :---------------------------- |
| `name`           | **Yes**        | The name of the asset.                            | `Vaillant EcoTec Plus Boiler` |
| `category`       | **Yes**        | The category of the asset (e.g., `Appliance`).    | `Plumbing`                    |
| `location`       | **Yes**        | The room or area where the asset is located.      | `Utility Room`                |
| `imageUrl`       | **Yes** (Opt)  | A photo of the asset.                             | `https://.../boiler.jpg`      |
| `modelNumber`    | **Yes** (Opt)  | The manufacturer's model number.                  | `ETEC-24`                     |
| `serialNumber`   | **Yes** (Opt)  | The unique serial number.                         | `211020001018651`             |
| `purchaseDate`   | **Yes** (Opt)  | The date the asset was purchased.                 | `2021-08-15T00:00:00Z`        |
| `warrantyExpiry` | **Yes** (Opt)  | The date the manufacturer's warranty expires.     | `2026-08-14T00:00:00Z`        |

---

### 4. Table: `maintenanceTasks` (sub-collection of `properties`)

**Purpose:** Manages all scheduled and completed maintenance jobs for a property.

| Field       | User Provided? | Description                                       | Example                 |
| :---------- | :------------- | :------------------------------------------------ | :---------------------- |
| `assetId`   | **Yes** (Opt)  | Links the task to a specific asset.               | `{assetId}`             |
| `title`     | **Yes**        | A short description of the task.                  | `Annual Boiler Service` |
| `dueDate`   | **Yes**        | The date the task is scheduled.                   | `2024-11-15T00:00:00Z`  |
| `priority`  | **Yes**        | The priority level (`High`, `Medium`, `Low`).     | `High`                  |
| `frequency` | **Yes**        | How often the task repeats (`Annually`, etc.).    | `Annually`              |
| `cost`      | **Yes** (Opt)  | The final cost upon completion.                   | `95.00`                 |
| `contractor`| **Yes** (Opt)  | The name of the service provider.                 | `ABC Gas Services`      |
| `status`    | No             | Automatically calculated based on `dueDate`.      | `Upcoming`              |

---

### 5. Table: `documents` (sub-collection of `properties`)

**Purpose:** A central repository for all files related to a property.

| Field           | User Provided? | Description                                     | Example                          |
| :-------------- | :------------- | :---------------------------------------------- | :------------------------------- |
| `name`          | **Yes**        | The name of the file being uploaded.            | `Boiler-Manual.pdf`              |
| `storagePath`   | No             | The path to the file in Cloud Storage.          | `documents/{userId}/{docId}.pdf`   |
| `type`          | **Yes**        | The category for the document (`Manual`, `Warranty`). | `Manual`                         |
| `size`          | No             | The size of the file in bytes.                  | `5800000`                        |
| `uploadedAt`    | No             | The timestamp when the document was uploaded.   | `2024-02-20T00:00:00Z`           |
| `linkedAssetId` | **Yes** (Opt)  | Links a document to a specific asset.           | `{assetId}`                      |
| `linkedTaskId`  | **Yes** (Opt)  | Links a document to a maintenance task.         | `{taskId}`                       |

---

### 6. Table: `expenses` (sub-collection of `properties`)

**Purpose:** Logs all financial transactions for a property.

| Field            | User Provided? | Description                                          | Example                  |
| :--------------- | :------------- | :--------------------------------------------------- | :----------------------- |
| `isRecurring`    | **Yes**        | Flag to distinguish one-off vs. recurring bills.     | `true`                   |
| `description`    | **Yes**        | A description of the transaction.                    | `Council Tax`            |
| `amount`         | **Yes**        | The monetary value of the expense.                   | `180.00`                 |
| `category`       | **Yes** (AI)   | The expense category (can be auto-suggested).        | `Utilities`              |
| `date`           | **Yes**        | The date of the transaction (for one-off expenses).  | `2024-08-01T00:00:00Z`   |
| `includeInSpend` | **Yes**        | Whether to count this in spending totals.            | `true`                   |
| `recurringDetails` | **Yes**      | Details for recurring bills if `isRecurring` is true. | (See sub-table)          |

#### `recurringDetails` (Sub-Fields)

| Field       | User Provided? | Description                                | Example     |
| :---------- | :------------- | :----------------------------------------- | :---------- |
| `frequency` | **Yes**        | How often the bill occurs (`monthly`, `yearly`). | `monthly`   |
| `startDate` | **Yes**        | The date the recurring payment begins.     | `2024-04-01T00:00:00Z` |
| `term`      | **Yes**        | The number of periods the payment lasts for. | `10`        |
| `termUnit`  | **Yes**        | The unit for the term (`months`, `years`).   | `months`    |
